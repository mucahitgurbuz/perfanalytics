{"id":"Focm","dependencies":[{"name":"/home/mucahit-ubuntu/Works/perfanaliticsApi/perfanalyticsJs/package.json","includedInParent":true,"mtime":1615732022432}],"generated":{"js":"window.perfAnalytic=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"http://localhost:8080\";window.performance||console.log(\"Performance API is not supported on this browser.\"),window.analytics={appCode:n,file:[],fcp:0,ttfb:0,domLoad:0,windowLoad:0};var t=function(n){return n/1e3};\"undefined\"!=typeof PerformanceObserver?new PerformanceObserver(function(n){n.getEntries().forEach(function(n){!function(n){\"paint\"===n.entryType&&\"first-contentful-paint\"===n.name&&(window.analytics.fcp=t(n.startTime)),\"resource\"===n.entryType&&\"xmlhttprequest\"!==n.initiatorType&&\"fetch\"!==n.initiatorType&&window.analytics.file.push({name:n.name.replace(window.location.href,\"\"),type:n.initiatorType,value:t(n.responseEnd)})}(n)})}).observe({entryTypes:[\"paint\",\"resource\"]}):console.log(\"This browser does not support PerformanceObserver\"),window.onload=function(){var n=window.performance,e=window.analytics;e.ttfb=t(n.timing.responseStart-n.timing.navigationStart),e.domLoad=t(n.timing.domContentLoadedEventEnd-n.timing.navigationStart),e.windowLoad=t((new Date).getTime()-n.timing.navigationStart),e.file.push({name:\"document\",type:\"document\",value:t(n.timing.responseEnd-n.timing.navigationStart)})},document.addEventListener(\"visibilitychange\",function(){\"hidden\"===document.visibilityState&&(console.log(window.analytics),fetch(\"\".concat(e,\"/analytic\"),{method:\"POST\",headers:{\"Access-Control-Allow-Origin\":\"*\",\"Content-Type\":\"application/json; charset=utf-8\"},keepalive:!0,body:JSON.stringify(window.analytics)}).then(function(n){return n.json()}).then(function(n){return console.log(n)}))})};"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","name":"window","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","name":"perfAnalytic","original":{"line":1,"column":7},"generated":{"line":1,"column":7}},{"source":"index.js","original":{"line":1,"column":22},"generated":{"line":1,"column":20}},{"source":"index.js","name":"appCode","original":{"line":1,"column":23},"generated":{"line":1,"column":29}},{"source":"index.js","name":"apiUrl","original":{"line":1,"column":32},"generated":{"line":1,"column":32}},{"source":"index.js","name":"apiUrl","original":{"line":1,"column":32},"generated":{"line":1,"column":36}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":38}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":48}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":55}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":63}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":67}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":77}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":80}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":90}},{"source":"index.js","original":{"line":1,"column":41},"generated":{"line":1,"column":93}},{"source":"index.js","name":"window","original":{"line":2,"column":7},"generated":{"line":1,"column":117}},{"source":"index.js","name":"performance","original":{"line":2,"column":14},"generated":{"line":1,"column":124}},{"source":"index.js","name":"console","original":{"line":3,"column":4},"generated":{"line":1,"column":137}},{"source":"index.js","name":"log","original":{"line":3,"column":12},"generated":{"line":1,"column":145}},{"source":"index.js","original":{"line":3,"column":16},"generated":{"line":1,"column":149}},{"source":"index.js","name":"window","original":{"line":5,"column":2},"generated":{"line":1,"column":202}},{"source":"index.js","name":"analytics","original":{"line":5,"column":9},"generated":{"line":1,"column":209}},{"source":"index.js","original":{"line":5,"column":21},"generated":{"line":1,"column":219}},{"source":"index.js","name":"appCode","original":{"line":6,"column":4},"generated":{"line":1,"column":220}},{"source":"index.js","name":"appCode","original":{"line":6,"column":13},"generated":{"line":1,"column":228}},{"source":"index.js","name":"file","original":{"line":7,"column":4},"generated":{"line":1,"column":230}},{"source":"index.js","original":{"line":7,"column":10},"generated":{"line":1,"column":235}},{"source":"index.js","name":"fcp","original":{"line":8,"column":4},"generated":{"line":1,"column":238}},{"source":"index.js","original":{"line":8,"column":9},"generated":{"line":1,"column":242}},{"source":"index.js","name":"ttfb","original":{"line":9,"column":4},"generated":{"line":1,"column":244}},{"source":"index.js","original":{"line":9,"column":10},"generated":{"line":1,"column":249}},{"source":"index.js","name":"domLoad","original":{"line":10,"column":4},"generated":{"line":1,"column":251}},{"source":"index.js","original":{"line":10,"column":13},"generated":{"line":1,"column":259}},{"source":"index.js","name":"windowLoad","original":{"line":11,"column":4},"generated":{"line":1,"column":261}},{"source":"index.js","original":{"line":11,"column":16},"generated":{"line":1,"column":272}},{"source":"index.js","name":"msToSeconds","original":{"line":14,"column":8},"generated":{"line":1,"column":275}},{"source":"index.js","name":"msToSeconds","original":{"line":14,"column":8},"generated":{"line":1,"column":279}},{"source":"index.js","original":{"line":14,"column":22},"generated":{"line":1,"column":281}},{"source":"index.js","name":"ms","original":{"line":14,"column":23},"generated":{"line":1,"column":290}},{"source":"index.js","name":"ms","original":{"line":14,"column":30},"generated":{"line":1,"column":293}},{"source":"index.js","name":"ms","original":{"line":14,"column":30},"generated":{"line":1,"column":300}},{"source":"index.js","original":{"line":14,"column":35},"generated":{"line":1,"column":302}},{"source":"index.js","original":{"line":17,"column":39},"generated":{"line":1,"column":307}},{"source":"index.js","name":"PerformanceObserver","original":{"line":17,"column":15},"generated":{"line":1,"column":327}},{"source":"index.js","original":{"line":42,"column":21},"generated":{"line":1,"column":347}},{"source":"index.js","name":"PerformanceObserver","original":{"line":42,"column":25},"generated":{"line":1,"column":351}},{"source":"index.js","original":{"line":42,"column":45},"generated":{"line":1,"column":371}},{"source":"index.js","name":"resourceList","original":{"line":42,"column":46},"generated":{"line":1,"column":380}},{"source":"index.js","name":"resourceList","original":{"line":43,"column":6},"generated":{"line":1,"column":383}},{"source":"index.js","name":"getEntries","original":{"line":43,"column":19},"generated":{"line":1,"column":385}},{"source":"index.js","name":"forEach","original":{"line":43,"column":32},"generated":{"line":1,"column":398}},{"source":"index.js","original":{"line":43,"column":40},"generated":{"line":1,"column":406}},{"source":"index.js","name":"resource","original":{"line":43,"column":41},"generated":{"line":1,"column":415}},{"source":"index.js","original":{"line":22,"column":35},"generated":{"line":1,"column":419}},{"source":"index.js","name":"resource","original":{"line":22,"column":36},"generated":{"line":1,"column":428}},{"source":"index.js","original":{"line":24,"column":31},"generated":{"line":1,"column":431}},{"source":"index.js","name":"resource","original":{"line":24,"column":8},"generated":{"line":1,"column":441}},{"source":"index.js","name":"entryType","original":{"line":24,"column":17},"generated":{"line":1,"column":443}},{"source":"index.js","original":{"line":25,"column":26},"generated":{"line":1,"column":454}},{"source":"index.js","name":"resource","original":{"line":25,"column":8},"generated":{"line":1,"column":481}},{"source":"index.js","name":"name","original":{"line":25,"column":17},"generated":{"line":1,"column":483}},{"source":"index.js","name":"window","original":{"line":27,"column":8},"generated":{"line":1,"column":490}},{"source":"index.js","name":"analytics","original":{"line":27,"column":15},"generated":{"line":1,"column":497}},{"source":"index.js","name":"fcp","original":{"line":27,"column":25},"generated":{"line":1,"column":507}},{"source":"index.js","name":"msToSeconds","original":{"line":27,"column":31},"generated":{"line":1,"column":511}},{"source":"index.js","name":"resource","original":{"line":27,"column":43},"generated":{"line":1,"column":513}},{"source":"index.js","name":"startTime","original":{"line":27,"column":52},"generated":{"line":1,"column":515}},{"source":"index.js","original":{"line":30,"column":31},"generated":{"line":1,"column":527}},{"source":"index.js","name":"resource","original":{"line":30,"column":8},"generated":{"line":1,"column":540}},{"source":"index.js","name":"entryType","original":{"line":30,"column":17},"generated":{"line":1,"column":542}},{"source":"index.js","original":{"line":31,"column":35},"generated":{"line":1,"column":553}},{"source":"index.js","name":"resource","original":{"line":31,"column":8},"generated":{"line":1,"column":572}},{"source":"index.js","name":"initiatorType","original":{"line":31,"column":17},"generated":{"line":1,"column":574}},{"source":"index.js","original":{"line":32,"column":35},"generated":{"line":1,"column":589}},{"source":"index.js","name":"resource","original":{"line":32,"column":8},"generated":{"line":1,"column":599}},{"source":"index.js","name":"initiatorType","original":{"line":32,"column":17},"generated":{"line":1,"column":601}},{"source":"index.js","name":"window","original":{"line":34,"column":8},"generated":{"line":1,"column":616}},{"source":"index.js","name":"analytics","original":{"line":34,"column":15},"generated":{"line":1,"column":623}},{"source":"index.js","name":"file","original":{"line":34,"column":25},"generated":{"line":1,"column":633}},{"source":"index.js","name":"push","original":{"line":34,"column":30},"generated":{"line":1,"column":638}},{"source":"index.js","original":{"line":34,"column":35},"generated":{"line":1,"column":643}},{"source":"index.js","name":"name","original":{"line":35,"column":10},"generated":{"line":1,"column":644}},{"source":"index.js","name":"resource","original":{"line":35,"column":16},"generated":{"line":1,"column":649}},{"source":"index.js","name":"name","original":{"line":35,"column":25},"generated":{"line":1,"column":651}},{"source":"index.js","name":"replace","original":{"line":35,"column":30},"generated":{"line":1,"column":656}},{"source":"index.js","name":"window","original":{"line":35,"column":38},"generated":{"line":1,"column":664}},{"source":"index.js","name":"location","original":{"line":35,"column":45},"generated":{"line":1,"column":671}},{"source":"index.js","name":"href","original":{"line":35,"column":54},"generated":{"line":1,"column":680}},{"source":"index.js","original":{"line":35,"column":60},"generated":{"line":1,"column":685}},{"source":"index.js","name":"type","original":{"line":36,"column":10},"generated":{"line":1,"column":689}},{"source":"index.js","name":"resource","original":{"line":36,"column":16},"generated":{"line":1,"column":694}},{"source":"index.js","name":"initiatorType","original":{"line":36,"column":25},"generated":{"line":1,"column":696}},{"source":"index.js","name":"value","original":{"line":37,"column":10},"generated":{"line":1,"column":710}},{"source":"index.js","name":"msToSeconds","original":{"line":37,"column":17},"generated":{"line":1,"column":716}},{"source":"index.js","name":"resource","original":{"line":37,"column":29},"generated":{"line":1,"column":718}},{"source":"index.js","name":"responseEnd","original":{"line":37,"column":38},"generated":{"line":1,"column":720}},{"source":"index.js","name":"handleObserverResource","original":{"line":44,"column":8},"generated":{"line":1,"column":735}},{"source":"index.js","name":"resource","original":{"line":44,"column":31},"generated":{"line":1,"column":736}},{"source":"index.js","name":"observe","original":{"line":47,"column":13},"generated":{"line":1,"column":743}},{"source":"index.js","original":{"line":47,"column":21},"generated":{"line":1,"column":751}},{"source":"index.js","name":"entryTypes","original":{"line":47,"column":23},"generated":{"line":1,"column":752}},{"source":"index.js","original":{"line":47,"column":35},"generated":{"line":1,"column":763}},{"source":"index.js","original":{"line":47,"column":36},"generated":{"line":1,"column":764}},{"source":"index.js","original":{"line":47,"column":45},"generated":{"line":1,"column":772}},{"source":"index.js","name":"console","original":{"line":18,"column":6},"generated":{"line":1,"column":786}},{"source":"index.js","name":"log","original":{"line":18,"column":14},"generated":{"line":1,"column":794}},{"source":"index.js","original":{"line":18,"column":18},"generated":{"line":1,"column":798}},{"source":"index.js","name":"window","original":{"line":52,"column":2},"generated":{"line":1,"column":851}},{"source":"index.js","name":"onload","original":{"line":52,"column":9},"generated":{"line":1,"column":858}},{"source":"index.js","original":{"line":52,"column":18},"generated":{"line":1,"column":865}},{"source":"index.js","name":"performance","original":{"line":53,"column":10},"generated":{"line":1,"column":876}},{"source":"index.js","name":"performance","original":{"line":53,"column":10},"generated":{"line":1,"column":880}},{"source":"index.js","name":"window","original":{"line":53,"column":24},"generated":{"line":1,"column":882}},{"source":"index.js","name":"performance","original":{"line":53,"column":31},"generated":{"line":1,"column":889}},{"source":"index.js","name":"analytics","original":{"line":54,"column":10},"generated":{"line":1,"column":901}},{"source":"index.js","name":"window","original":{"line":54,"column":22},"generated":{"line":1,"column":903}},{"source":"index.js","name":"analytics","original":{"line":54,"column":29},"generated":{"line":1,"column":910}},{"source":"index.js","name":"analytics","original":{"line":55,"column":4},"generated":{"line":1,"column":920}},{"source":"index.js","name":"ttfb","original":{"line":55,"column":14},"generated":{"line":1,"column":922}},{"source":"index.js","name":"msToSeconds","original":{"line":55,"column":21},"generated":{"line":1,"column":927}},{"source":"index.js","name":"performance","original":{"line":56,"column":6},"generated":{"line":1,"column":929}},{"source":"index.js","name":"timing","original":{"line":56,"column":18},"generated":{"line":1,"column":931}},{"source":"index.js","name":"responseStart","original":{"line":56,"column":25},"generated":{"line":1,"column":938}},{"source":"index.js","name":"performance","original":{"line":56,"column":41},"generated":{"line":1,"column":952}},{"source":"index.js","name":"timing","original":{"line":56,"column":53},"generated":{"line":1,"column":954}},{"source":"index.js","name":"navigationStart","original":{"line":56,"column":60},"generated":{"line":1,"column":961}},{"source":"index.js","name":"analytics","original":{"line":58,"column":4},"generated":{"line":1,"column":978}},{"source":"index.js","name":"domLoad","original":{"line":58,"column":14},"generated":{"line":1,"column":980}},{"source":"index.js","name":"msToSeconds","original":{"line":58,"column":24},"generated":{"line":1,"column":988}},{"source":"index.js","name":"performance","original":{"line":59,"column":6},"generated":{"line":1,"column":990}},{"source":"index.js","name":"timing","original":{"line":59,"column":18},"generated":{"line":1,"column":992}},{"source":"index.js","name":"domContentLoadedEventEnd","original":{"line":59,"column":25},"generated":{"line":1,"column":999}},{"source":"index.js","name":"performance","original":{"line":60,"column":8},"generated":{"line":1,"column":1024}},{"source":"index.js","name":"timing","original":{"line":60,"column":20},"generated":{"line":1,"column":1026}},{"source":"index.js","name":"navigationStart","original":{"line":60,"column":27},"generated":{"line":1,"column":1033}},{"source":"index.js","name":"analytics","original":{"line":62,"column":4},"generated":{"line":1,"column":1050}},{"source":"index.js","name":"windowLoad","original":{"line":62,"column":14},"generated":{"line":1,"column":1052}},{"source":"index.js","name":"msToSeconds","original":{"line":62,"column":27},"generated":{"line":1,"column":1063}},{"source":"index.js","original":{"line":63,"column":6},"generated":{"line":1,"column":1066}},{"source":"index.js","name":"Date","original":{"line":63,"column":10},"generated":{"line":1,"column":1070}},{"source":"index.js","name":"getTime","original":{"line":63,"column":17},"generated":{"line":1,"column":1076}},{"source":"index.js","name":"performance","original":{"line":63,"column":29},"generated":{"line":1,"column":1086}},{"source":"index.js","name":"timing","original":{"line":63,"column":41},"generated":{"line":1,"column":1088}},{"source":"index.js","name":"navigationStart","original":{"line":63,"column":48},"generated":{"line":1,"column":1095}},{"source":"index.js","name":"analytics","original":{"line":65,"column":4},"generated":{"line":1,"column":1112}},{"source":"index.js","name":"file","original":{"line":65,"column":14},"generated":{"line":1,"column":1114}},{"source":"index.js","name":"push","original":{"line":65,"column":19},"generated":{"line":1,"column":1119}},{"source":"index.js","original":{"line":65,"column":24},"generated":{"line":1,"column":1124}},{"source":"index.js","name":"name","original":{"line":66,"column":6},"generated":{"line":1,"column":1125}},{"source":"index.js","original":{"line":66,"column":12},"generated":{"line":1,"column":1130}},{"source":"index.js","name":"type","original":{"line":67,"column":6},"generated":{"line":1,"column":1141}},{"source":"index.js","original":{"line":67,"column":12},"generated":{"line":1,"column":1146}},{"source":"index.js","name":"value","original":{"line":68,"column":6},"generated":{"line":1,"column":1157}},{"source":"index.js","name":"msToSeconds","original":{"line":68,"column":13},"generated":{"line":1,"column":1163}},{"source":"index.js","name":"performance","original":{"line":69,"column":8},"generated":{"line":1,"column":1165}},{"source":"index.js","name":"timing","original":{"line":69,"column":20},"generated":{"line":1,"column":1167}},{"source":"index.js","name":"responseEnd","original":{"line":69,"column":27},"generated":{"line":1,"column":1174}},{"source":"index.js","name":"performance","original":{"line":69,"column":41},"generated":{"line":1,"column":1186}},{"source":"index.js","name":"timing","original":{"line":69,"column":53},"generated":{"line":1,"column":1188}},{"source":"index.js","name":"navigationStart","original":{"line":69,"column":60},"generated":{"line":1,"column":1195}},{"source":"index.js","name":"document","original":{"line":74,"column":2},"generated":{"line":1,"column":1215}},{"source":"index.js","name":"addEventListener","original":{"line":74,"column":11},"generated":{"line":1,"column":1224}},{"source":"index.js","original":{"line":74,"column":28},"generated":{"line":1,"column":1241}},{"source":"index.js","original":{"line":74,"column":48},"generated":{"line":1,"column":1260}},{"source":"index.js","original":{"line":75,"column":37},"generated":{"line":1,"column":1271}},{"source":"index.js","name":"document","original":{"line":75,"column":8},"generated":{"line":1,"column":1282}},{"source":"index.js","name":"visibilityState","original":{"line":75,"column":17},"generated":{"line":1,"column":1291}},{"source":"index.js","name":"console","original":{"line":76,"column":6},"generated":{"line":1,"column":1309}},{"source":"index.js","name":"log","original":{"line":76,"column":14},"generated":{"line":1,"column":1317}},{"source":"index.js","name":"window","original":{"line":76,"column":18},"generated":{"line":1,"column":1321}},{"source":"index.js","name":"analytics","original":{"line":76,"column":25},"generated":{"line":1,"column":1328}},{"source":"index.js","name":"fetch","original":{"line":77,"column":6},"generated":{"line":1,"column":1339}},{"source":"index.js","name":"apiUrl","original":{"line":77,"column":15},"generated":{"line":1,"column":1345}},{"source":"index.js","name":"apiUrl","original":{"line":77,"column":15},"generated":{"line":1,"column":1348}},{"source":"index.js","name":"apiUrl","original":{"line":77,"column":15},"generated":{"line":1,"column":1355}},{"source":"index.js","original":{"line":77,"column":34},"generated":{"line":1,"column":1357}},{"source":"index.js","original":{"line":77,"column":34},"generated":{"line":1,"column":1370}},{"source":"index.js","name":"method","original":{"line":78,"column":8},"generated":{"line":1,"column":1371}},{"source":"index.js","original":{"line":78,"column":16},"generated":{"line":1,"column":1378}},{"source":"index.js","name":"headers","original":{"line":79,"column":8},"generated":{"line":1,"column":1385}},{"source":"index.js","original":{"line":79,"column":17},"generated":{"line":1,"column":1393}},{"source":"index.js","original":{"line":80,"column":41},"generated":{"line":1,"column":1394}},{"source":"index.js","original":{"line":80,"column":41},"generated":{"line":1,"column":1424}},{"source":"index.js","original":{"line":81,"column":26},"generated":{"line":1,"column":1428}},{"source":"index.js","original":{"line":81,"column":26},"generated":{"line":1,"column":1443}},{"source":"index.js","name":"keepalive","original":{"line":83,"column":8},"generated":{"line":1,"column":1478}},{"source":"index.js","original":{"line":83,"column":19},"generated":{"line":1,"column":1489}},{"source":"index.js","name":"body","original":{"line":84,"column":8},"generated":{"line":1,"column":1491}},{"source":"index.js","name":"JSON","original":{"line":84,"column":14},"generated":{"line":1,"column":1496}},{"source":"index.js","name":"stringify","original":{"line":84,"column":19},"generated":{"line":1,"column":1501}},{"source":"index.js","name":"window","original":{"line":84,"column":29},"generated":{"line":1,"column":1511}},{"source":"index.js","name":"analytics","original":{"line":84,"column":36},"generated":{"line":1,"column":1518}},{"source":"index.js","name":"then","original":{"line":86,"column":9},"generated":{"line":1,"column":1531}},{"source":"index.js","original":{"line":86,"column":14},"generated":{"line":1,"column":1536}},{"source":"index.js","name":"res","original":{"line":86,"column":15},"generated":{"line":1,"column":1545}},{"source":"index.js","name":"res","original":{"line":86,"column":23},"generated":{"line":1,"column":1548}},{"source":"index.js","name":"res","original":{"line":86,"column":23},"generated":{"line":1,"column":1555}},{"source":"index.js","name":"json","original":{"line":86,"column":27},"generated":{"line":1,"column":1557}},{"source":"index.js","name":"then","original":{"line":87,"column":9},"generated":{"line":1,"column":1566}},{"source":"index.js","original":{"line":87,"column":14},"generated":{"line":1,"column":1571}},{"source":"index.js","name":"res","original":{"line":87,"column":15},"generated":{"line":1,"column":1580}},{"source":"index.js","name":"console","original":{"line":87,"column":23},"generated":{"line":1,"column":1583}},{"source":"index.js","name":"console","original":{"line":87,"column":23},"generated":{"line":1,"column":1590}},{"source":"index.js","name":"log","original":{"line":87,"column":31},"generated":{"line":1,"column":1598}},{"source":"index.js","name":"res","original":{"line":87,"column":35},"generated":{"line":1,"column":1602}}],"sources":{"index.js":"window.perfAnalytic = (appCode, apiUrl = \"http://localhost:8080\") => {\n  if (!window.performance) {\n    console.log(\"Performance API is not supported on this browser.\");\n  }\n  window.analytics = {\n    appCode: appCode,\n    file: [],\n    fcp: 0,\n    ttfb: 0,\n    domLoad: 0,\n    windowLoad: 0,\n  };\n\n  const msToSeconds = (ms) => ms / 1000;\n\n  const startObserver = () => {\n    if (typeof PerformanceObserver === \"undefined\") {\n      console.log(\"This browser does not support PerformanceObserver\");\n      return;\n    }\n\n    const handleObserverResource = (resource) => {\n      if (\n        resource.entryType === \"paint\" &&\n        resource.name === \"first-contentful-paint\"\n      ) {\n        window.analytics.fcp = msToSeconds(resource.startTime);\n      }\n      if (\n        resource.entryType === \"resource\" &&\n        resource.initiatorType !== \"xmlhttprequest\" &&\n        resource.initiatorType !== \"fetch\"\n      ) {\n        window.analytics.file.push({\n          name: resource.name.replace(window.location.href, \"\"),\n          type: resource.initiatorType,\n          value: msToSeconds(resource.responseEnd),\n        });\n      }\n    };\n\n    const observer = new PerformanceObserver((resourceList) => {\n      resourceList.getEntries().forEach((resource) => {\n        handleObserverResource(resource);\n      });\n    });\n    observer.observe({ entryTypes: [\"paint\", \"resource\"] });\n  };\n\n  startObserver();\n\n  window.onload = () => {\n    const performance = window.performance;\n    const analytics = window.analytics;\n    analytics.ttfb = msToSeconds(\n      performance.timing.responseStart - performance.timing.navigationStart\n    );\n    analytics.domLoad = msToSeconds(\n      performance.timing.domContentLoadedEventEnd -\n        performance.timing.navigationStart\n    );\n    analytics.windowLoad = msToSeconds(\n      new Date().getTime() - performance.timing.navigationStart\n    );\n    analytics.file.push({\n      name: \"document\",\n      type: \"document\",\n      value: msToSeconds(\n        performance.timing.responseEnd - performance.timing.navigationStart\n      ),\n    });\n  };\n\n  document.addEventListener(\"visibilitychange\", function logData() {\n    if (document.visibilityState === \"hidden\") {\n      console.log(window.analytics);\n      fetch(`${apiUrl}/analytic`, {\n        method: \"POST\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        keepalive: true,\n        body: JSON.stringify(window.analytics),\n      })\n        .then((res) => res.json())\n        .then((res) => console.log(res));\n    }\n  });\n};\n"},"lineCount":null}},"error":null,"hash":"aa8dd57f6769426b34b2afd6dd8c3837","cacheData":{"env":{}}}